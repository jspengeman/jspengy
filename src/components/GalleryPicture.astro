---
import { Picture } from 'astro:assets';
import { getImageUrl } from "../utils/gallery"
const { currPicture, prevPicture, nextPicture } = Astro.props;
---

<div class="my-8 mb-16">
    <div class="flex justify-center mb-2">
        {prevPicture && <a id="prev-button" data-prev-picture={prevPicture} href={`/gallery/${prevPicture}`} class="mx-3 px-1 border-1 border-solid rounded-md"> ← </a>}
        {(nextPicture && prevPicture) && <span>|</span>}
        {nextPicture && <a id="next-button" data-next-picture={nextPicture} href={`/gallery/${nextPicture}`} class="mx-3 px-1 border-1 border-solid rounded-md"> → </a>}
    </div>
    <Picture
        src={getImageUrl("/" + currPicture)}
        alt="Sorry, I will work on getting alt text implemented. One step at a time."
        format="avif"
        inferSize={true}
        quality={75}
        class="rounded-sm pb-4 border border-transparent"
        decoding="async"
        loading="eager"
    />
</div>

<script>
    const prevButtton = document.getElementById("prev-button");
    const nextButton = document.getElementById("next-button");

    document.addEventListener("keydown", (event) => {
        if (event.key === "ArrowLeft") {
            const prevPicture = prevButtton?.dataset.prevPicture;
            if (prevPicture) {
                window.location.replace(`/gallery/${prevPicture}`);
            }
        } else if (event.key === "ArrowRight") {
            const nextPicture = nextButton?.dataset.nextPicture;
            console.log(nextPicture)
            if (nextPicture) {
                window.location.replace(`/gallery/${nextPicture}`);
            }
        }
    });
</script>